<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="../../favicon.ico">

    <title>GuardarPunto - Ficha Juego</title>
    <!-- Custom styles for this template -->
    <link href="../css/FichaJuegoCSS.css" rel="stylesheet" type="text/css">

    <!-- SCRIPTS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.11.0/umd/popper.min.js" integrity="sha384-b/U6ypiBEHpOf/4+1nzFpr53nxSS+GLCkfwBdFNTxtclqqenISfwAzpKaMNFNmj4" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <!-- Optional theme -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css" integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp" crossorigin="anonymous">

    <!-- Latest compiled and minified JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    
    <!-- Font Awesome Icon Library -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
      
    
    <!--Enlaces para la pantalla de registro-->
    <link rel="stylesheet"	href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <!-- <script	src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script> -->
      
      <!-- Script propio para botones y demas-->
    <script src="../js/FichaJuego.js"></script>

    <style>
    body { background-color: #a9d5cb; }
    </style>


  </head>

  <body>

    <!-- Fixed navbar -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div id="navbar" class="navbar-collapse collapse">
          <ul id="elementosNavBar" class="nav navbar-nav">
            <li><a id="log" href="/">Guardar Punto</a></li>
            <li><a id="elem" href="/">Inicio</a></li>
            <li><a id="elem" href="/Juegos">Juegos</a></li>
            <li><a id="elem" href="/Usuario/1">Perfil</a></li>
            <li><a id="elem" href="/Review/1">Reviews</a></li>
            <li><a id="elem" href="/Amigos/1">Amigos</a></li>  
          </ul>
          <form id="buscador" class="form-inline" action="/buscar" method="post">
				<input id="bus" class="form-control mr-sm-2" type="text" placeholder="Buscar" name="txt">
				<button class="btn btn-outline-success my-2 my-sm-0" type="submit">Buscar</button>
		  </form>
        
      </div>
    </nav>


    <div  class="row row-offcanvas row-offcanvas-right">
      <div  class="col-md-1"></div> <!-- margen izquierdo -->

      <div  id="centro" class="col-md-7">
        <!-- posicion resto de elementos-->
        <h2 class="listaJuegos">{{juego.title}}</h2>
        <div class="datosJuego">
              <div class="colImagen">
                    <img src="{{juego.imagen}}" width="160px" height="226px">
                    <div id="anadirALista">
                        <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Añadir a lista
                        <span class="caret"></span></button>
                        <ul class="dropdown-menu">
                            <li><a href="#">Quiero jugar</a></li>
                            <li><a href="#">Estoy jugando</a></li>
                            <li><a href="#">Jugado</a></li>
                        </ul>
                    </div>
              </div>

              <div class="text tituloDato">
                <p>Compañía:</p>
                <p>Año:</p>
                <p>Género:</p>
                <p>Plataforma:</p>
            </div>
              <div class="text dato">
                <p>{{juego.compannia}}</p>
                <p>{{juego.anyo}}</p>
                <p>{{juego.genero}}</p>
                <p>{{juego.plataforma}}</p>
            </div>
            <div class="cuadroPuntuacion">{{juego.valoracion}}</div>
            <div class="text resumen" style="word-wrap: break-word;">
                <h4 style="font-weight: bold;">Resumen</h4>
                <p>{{juego.resumen}}</p>
            </div>
        </div>

        <!-- Apartado de reviews -->
        <div class="seccionReviews">
            <h3 class="seccionReviews">Reviews</h3>
            <form action="/nuevaReview" method="post">
	            <textarea id="nuevaReview" name="texto" rows="5" style="width: 80%;">Nueva review</textarea>
	            <div id="reviewPtosEnviar">
	                <input type="number" name="puntuacion" min="1" max="5" step="0.5" required> 
	                <input type="hidden" name="id_juego" value="{{juego.id}}"/>
                    <input type="hidden" name="id_usuario" value="1"/>             
	                <p><button type="submit" style="margin-top: 5px;">Enviar</button></p>
	            </div>
            </form>

            <ul id="listaReviews" style="list-style-type : none;">
                {{#listaReviews}}
                <li class="review" style="display: flex;">
                    <div class="imgUsuario" style="float: left;">
                        <img src=" " width="80px" height="113px">
                    </div>
                    <div class="resto" style="display: flex; flex-direction: column;">
                        <p style="font-weight: bold;">{{user.nombre}}</p>  
                        <div class="cuadroPuntuacionReview">{{puntuacion}}</div>                      
                        <p>{{primeraLinea}}...</p>

                        <div id="textoCompleto{{id}}" class="collapse" style="word-wrap: break-word;">
                            {{texto}}
                        </div>
                        <a href="#textoCompleto{{id}}" data-toggle="collapse">Leer más</a>
                    </div>
                </li>                
            {{/listaReviews}}
            </ul>

        </div>
      </div>

      <div id="der" class="col-md-3">
        <!-- Columna derecha con login, noticias... -->
        <div class="flex-container derecha">

            <div class="comentarios" id="comentarios">
                <h3 class="tituloSeccion">Comentarios</h3>

                <div class="anadirComentario" style="margin-bottom: 8px;">
                	<form action="/nuevoComentario" method="post">
	                    <textarea id="nuevoComentario" rows="2" style="width: 100%;" maxlength="100" name="texto">Nuevo comentario</textarea>
	                    <input type="hidden" name="id_juego" value="{{juego.id}}"/>
	                    <input type="hidden" name="id_usuario" value="1"/>
	                    <button type="submit">Enviar</button>
                  	</form>
                </div>

                <!-- Lista de comentarios -->
                <ul id="listaComentarios" style="list-style-type : none;">
                    {{#listaComentarios}}
                    <li class="comentario" style="display: flex;">
                        <div class="imgUsuario" style="float: left;">
                            <img src="" width="40px" height="56.5px">
                        </div>
                        <div class="resto">
                            <p style="font-weight: bold; font-size: 15px;">{{user.nombre}}</p>
                        
                            <p>{{texto}}</p>
                        </div>
                    </li>                   
                {{/listaComentarios}}
                </ul>
                                             
            </div>

            <div class="login" id="login">
					<h3 class="tituloSeccion">Login</h3>

					<form action="" id="loginForm">
						<label><b>Usuario</b></label> 
                        <input type="text" placeholder="Nombre de usuario" name="usuario" required /> 
                        
                        <label><b>Contraseña</b></label>
						<input type="password" placeholder="Contraseña" name="password"	required />

						<button type="button" id="loginBtn" onclick="ocultarLogin()">Login</button>
						<!--Habria que cambiarlo para enviar datos, de momento solo oculta el panel para mostrar el de juegos-->
					</form>
					<button type="button" id="registrarseBtn" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">Registrarse</button>

					<!-- Modal -->
					<div class="modal fade" id="myModal" role="dialog">
						<div class="modal-dialog">

							<!-- Modal content-->
							<div class="modal-content">
								<div class="modal-header">
									<button type="button" class="close" data-dismiss="modal">&times;</button>
									<div id="tituloRegistro" align="center">Guardar Punto</div>
								</div>
								<div class="modal-body">
									<form action="" id="regForm">
										<label id="tit"><b>Usuario</b></label> <input type="text"
											placeholder="Nombre de usuario" name="usuario" required /> <label
											id="tit"><b>Contraseña</b></label> <input type="password"
											placeholder="Contraseña" name="password" required />
										<button type="button" id="regBtn" class="btn btn-default"
											data-dismiss="modal" onclick="ocultarLogin()">Registrarse</button>
										<!--Habria que cambiarlo para enviar datos, de momento solo oculta el panel para mostrar el de juegos-->
									</form>
								</div>
							</div>

						</div>
					</div>

					<!--Final de la pantalla de registro-->
				</div>

				<div class="tusJuegos" style="display: none" id="tusJuegos">
					<h3 class="tituloSeccion">Tus juegos</h3>
					<div class="flex-container tusJuegosContainer">
                        {{#listaJuegosUsuario}}
						<div class="miJuego" style="text-align: center;">
							<a href="juego/{{id}}"> 
                                <img src="{{imagen}}" width="80px" height="113px"> 
                                <br /> 
                                <a href="juego/{{id}}">{{Titulo}}</a>
							</a>
						</div>		
						{{/listaJuegosUsuario}}
					</div>
				</div>

        </div>
      </div>
    </div>


    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="../../assets/js/vendor/jquery.min.js"><\/script>')</script>
    <script src="../../dist/js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>
  </body>
</html>
